<p-toolbar>
  <div>
    <button pButton pRipple (click)="goMap()">Go Map</button>
  </div>
  <app-user-avatar
    class="p-toolbar-group-right"
    >
  </app-user-avatar>
</p-toolbar>

<form
  #editParkForm="ngForm"
  (ngSubmit)="editPark(editParkForm)"
  >

  <div class="p-inputgroup">
    <label
      for="name"
      class="p-inputgroup-addon"
      >
      <i class="pi pi-user"></i>
    </label>

    <input
      type="text"
      name="name"
      required
      [(ngModel)]="park.name"
      pInputText
      placeholder="Enter park name"
      pattern="[a-zA-Z0-9 ]+"
      minlength="3"
      maxlength="50"
      />
  </div>

  <div class="p-inputgroup">
    <label
      for="location"
      class="p-inputgroup-addon"
      >
      <i class="pi pi-user"></i>
    </label>

    <input
      type="text"
      name="location"
      maxlength="200"
      [(ngModel)]="park.location"
      pInputText
      placeholder="Enter location information"
      pattern="[a-zA-Z0-9 ]+"
      />
  </div>

  <div>
    <input
      name="latitude"
      pInputText
      type="number"
      [ngModel]="park.lat"
      readonly
      placeholder="Latitude"
      class="me-1"
      required
      >
    <input
      name="longitude"
      pInputText
      [ngModel]="park.lng"
      type="number"
      readonly
      placeholder="Longitude"
      class="me-1"
      required
      >

    <button
      type="button"
      pButton
      pRipple
      label="Select on Map"
      (click)="showMapModal()"
      ></button>
  </div>

  <div *ngFor="let extra of extrasModel; let i=index" class="p-inputgroup">
    <input
      [name]='"extra"+i'
      type="text"
      pInputText
      placeholder="Enter extra benefits"
      required
      maxlength="50"
      [(ngModel)]="extrasModel[i].val"
      >

    <button
      pButton
      pRipple
      type="button"
      class="p-inputgroup-addon remove-extra"
      (click)="removeExtra(i)"
      >
      <i class="pi pi-minus" style="line-height: 1.25;color:white"></i>
    </button>
  </div>
  <div class="d-flex justify-content-end mt-1 mb-2">
    <button
      pButton
      pRipple
      type="button"
      class="add-extra"
      (click)="addExtra()"
      icon="pi pi-plus"
      [style]="extrasModel.length == 0 ? '' : 'width: 63px;'"
      [label]="extrasModel.length == 0 ? 'Add Extra Information' : ''"
      >
    </button>
  </div>

  <div>
    <button
      type="submit"
      pButton
      pRipple
      class="p-button-raised p-button-primary"
      label="Save"
      [loading]="editing"
      >
    </button>
  </div>
</form>

<p-toast (onClose)="messageClose()"></p-toast>

<div [ngClass]="mapModalVisible ? 'd-absolute' : 'd-none'" class="fullscreen-modal">
  <div id="selectLatLngMap">

  </div>
  <div class="d-flex justify-content-between" style="height: 80px;">

    <button
      type="button"
      pButton
      pRipple
      class="p-button-sm p-button-success rounded-0"
      (click)="mapModalSelect()"
      style="height: 100%;"
      label="Select"
      ></button>

    <span style="height: 100%;">Latitude: {{park.lat}}</span>

    <span style="height: 100%;">Longitude: {{park.lng}}</span>

    <button
      type="button"
      pButton
      pRipple
      class="p-button-sm p-button-danger rounded-0"
      (click)="mapModalCancel()"
      style="height: 80px;"
      label="Cancel"
      ></button>
  </div>
</div>
